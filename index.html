<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ARM Study Co - Worksheet Anak Tematik</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- 1. SETTINGS & VARIABLES --- */
        :root {
            --orange: #FF8C42; 
            --blue: #4FB0E6; 
            --green: #8FD694; 
            --yellow: #FFD93D;
            --purple: #A55EEA;
            --paper: #FFFDF9;
            --text: #2D3436;
            --radius: 20px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Quicksand', sans-serif; 
            background-color: var(--paper); 
            color: var(--text);
            background-image: 
                linear-gradient(#E5E5E5 1px, transparent 1px),
                linear-gradient(90deg, #E5E5E5 1px, transparent 1px);
            background-size: 40px 40px;
            overflow-x: hidden;
            scroll-behavior: smooth;
            min-height: 100vh;
            position: relative;
        }

        h1, h2, h3, h4 { font-family: 'Fredoka', sans-serif; letter-spacing: 0.5px; }
        button, input, select, textarea { font-family: 'Quicksand', sans-serif; outline: none; transition: 0.2s; }
        button { cursor: pointer; border: none; }
        
        /* Container Setup */
        .container { 
            max-width: 1100px; 
            margin: 0 auto; 
            padding: 0 20px; 
            position: relative; 
            z-index: 2; 
        }

        /* --- 2. DEKORASI BACKGROUND (BLOB) --- */
        .blob-bg {
            position: fixed;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.4;
            z-index: 0;
            pointer-events: none;
        }
        .blob-1 { top: -50px; left: -50px; width: 300px; height: 300px; background: var(--blue); }
        .blob-2 { top: 20%; right: -100px; width: 250px; height: 250px; background: var(--yellow); }
        .blob-3 { bottom: -50px; left: 20%; width: 200px; height: 200px; background: var(--green); }

        /* --- 3. COMPONENTS --- */
        .btn {
            display: inline-flex; align-items: center; gap: 10px;
            padding: 14px 28px; border-radius: 50px;
            font-weight: 700; font-size: 1.1rem;
            box-shadow: 0 6px 0 rgba(0,0,0,0.1);
            transform: translateY(0);
        }
        .btn:active { transform: translateY(4px); box-shadow: 0 2px 0 rgba(0,0,0,0.1); }
        
        .btn-primary { background: var(--orange); color: white; }
        .btn-custom { background: var(--purple); color: white; box-shadow: 0 6px 0 #8844d1; }
        .btn-whatsapp { background: #25D366; color: white; width: 100%; justify-content: center; box-shadow: 0 4px 0 #1da851; }

        /* --- 4. HERO --- */
        nav { 
            padding: 15px 0; 
            display: flex; 
            justify-content: center; 
            position: relative; 
            z-index: 10; 
        }
        .logo-container {
            background: white; padding: 8px 25px; border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); border: 2px solid #eee;
            display: flex; align-items: center; gap: 8px;
        }
        .logo-img { height: 35px; }

        .hero { padding: 40px 0 60px; text-align: center; position: relative; z-index: 2; }
        .hero h1 { font-size: 2.8rem; line-height: 1.2; margin-bottom: 20px; }
        .hero h1 span { color: var(--blue); position: relative; }
        .hero h1 span::after {
            content: ''; position: absolute; bottom: 5px; left: 0; width: 100%; height: 10px;
            background: var(--yellow); z-index: -1; border-radius: 10px; opacity: 0.6;
        }
        .hero p { font-size: 1.1rem; color: #666; max-width: 600px; margin: 0 auto 30px; line-height: 1.6; }

        .hero-badges { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 25px; }
        .badge-item {
            background: white; padding: 6px 12px; border-radius: 15px; font-size: 0.85rem;
            font-weight: 600; border: 1px dashed var(--orange); color: #555;
        }

        /* --- 5. CATALOG & CARDS --- */
        .catalog-header { text-align: center; margin-bottom: 30px; }
        
        .cat-toggle {
            background: #fff; display: inline-flex; padding: 4px; border-radius: 50px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05); border: 1px solid #eee; margin-top: 10px; flex-wrap: wrap; justify-content: center;
        }
        .toggle-btn {
            padding: 8px 18px; border-radius: 40px; font-weight: 700; color: #999;
            font-family: 'Fredoka', sans-serif; background: transparent; font-size: 0.9rem;
        }
        .toggle-btn.active { background: var(--blue); color: white; }

        .product-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 30px;
            padding-bottom: 20px;
        }

        /* CARD STYLE */
        .product-card {
            background: white; 
            border-radius: var(--radius); 
            position: relative;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s; 
            border: 3px solid #f0f0f0;
            cursor: pointer;
            z-index: 2;
        }
        
        .product-card:hover {
            transform: translateY(-10px) rotate(-1deg); 
            border-color: var(--orange);
            box-shadow: 0 15px 30px rgba(255, 140, 66, 0.25);
            z-index: 5;
        }

        .product-card:active { 
            transform: scale(0.96) !important; 
            border-color: var(--orange); 
        }

        .tape {
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 70px; height: 22px; background: rgba(255,255,255,0.8);
            border-left: 1px dashed #ccc; border-right: 1px dashed #ccc;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); z-index: 6;
        }

        .card-image-wrapper {
            height: 180px; overflow: hidden;
            border-radius: var(--radius) var(--radius) 0 0;
            background: #f9f9f9; position: relative;
        }
        .card-image-wrapper img { width: 100%; height: 100%; object-fit: cover; }
        
        .tag-variant {
            position: absolute; bottom: 8px; right: 8px; padding: 4px 10px;
            border-radius: 10px; color: white; font-weight: bold; font-size: 0.75rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 3;
        }
        .tag-roblox { background: #E74C3C; }
        .tag-frozen { background: #3498DB; }
        .tag-nusantara { background: #F1C40F; color: #333 !important; }

        .card-content { padding: 15px; }
        .card-title { font-size: 1.1rem; margin-bottom: 5px; color: var(--text); line-height: 1.3; }
        
        .card-action {
            display: flex; justify-content: space-between; align-items: center;
            border-top: 2px dashed #eee; padding-top: 10px; margin-top: 10px;
        }
        .price { font-size: 1.1rem; font-weight: 800; color: var(--text); }
        .btn-add-mini {
            width: 32px; height: 32px; background: var(--green); color: white;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 1rem; box-shadow: 0 2px 0 #6FB875;
            transition: 0.2s;
        }
        .btn-add-mini:hover { transform: scale(1.1) rotate(90deg); background: var(--orange); }

        /* --- 6. CUSTOM REQUEST (MOBILE FRIENDLY) --- */
        .custom-section {
            margin: 60px 0 120px; 
            background: #F3E5F5;
            border-radius: 30px;
            padding: 30px;
            position: relative;
            text-align: center;
            border: 2px dashed var(--purple);
            z-index: 2;
        }
        .custom-title { color: var(--purple); margin-bottom: 10px; font-size: 1.6rem; }
        .custom-desc { max-width: 600px; margin: 0 auto 25px; color: #555; font-size: 0.95rem; }

        .custom-form {
            display: grid; gap: 15px; max-width: 400px; margin: 0 auto;
            background: white; padding: 25px; border-radius: 20px;
            box-shadow: 0 10px 20px rgba(165, 94, 234, 0.15);
        }
        .form-label { font-weight: 700; font-size: 0.9rem; margin-bottom: 8px; display: block; text-align: left; }
        .form-input {
            width: 100%; padding: 14px; border: 2px solid #eee; border-radius: 15px;
            font-size: 1rem; background: #FAFAFA;
        }
        .form-input:focus { border-color: var(--purple); background: #fff; }
        
        .hidden-input { display: none; margin-top: 10px; border-color: var(--purple); animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity:0; transform:translateY(-5px); } to { opacity:1; transform:translateY(0); } }

        /* --- 7. MODALS --- */
        .modal-wrap {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95); z-index: 9999;
            display: none; justify-content: center; align-items: center; padding: 20px;
        }
        .modal-wrap.show { display: flex; }
        
        .modal-box {
            background: white; width: 100%; max-width: 450px;
            border-radius: 25px; box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            padding: 25px; border: 1px solid #eee; position: relative;
            max-height: 90vh; overflow-y: auto;
        }

        .preview-img { width: 100%; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .preview-tag { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; color: white; margin-bottom: 15px; }
        .preview-desc { font-size: 0.95rem; color: #666; line-height: 1.6; margin-bottom: 20px; }

        .cart-float {
            position: fixed; bottom: 30px; right: 30px;
            background: var(--text); color: white;
            padding: 12px 20px; border-radius: 50px;
            display: flex; align-items: center; gap: 10px; font-weight: 700;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transform: scale(0); transition: 0.3s; z-index: 5000;
        }
        .cart-float.visible { transform: scale(1); }
        .cart-badge { background: var(--orange); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; }

        /* --- 8. MOBILE OPTIMIZATION --- */
        @media (max-width: 480px) {
            .hero { padding: 30px 0 40px; }
            .hero h1 { font-size: 2.2rem; }
            .product-grid { grid-template-columns: 1fr 1fr; gap: 15px; }
            .product-card { border-width: 2px; }
            .card-image-wrapper { height: 115px; }
            .card-content { padding: 10px; }
            .card-title { 
                font-size: 0.9rem; margin-bottom: 5px; height: 2.4rem; 
                overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
            }
            .price { font-size: 0.9rem; }
            .tape { width: 40px; height: 15px; top: -6px; }
            .cart-float { bottom: 20px; right: 20px; font-size: 0.85rem; padding: 10px 16px; }
            
            /* Form Optimization Mobile */
            .custom-section { padding: 20px; }
            .custom-form { padding: 20px; width: 100%; }
        }
    </style>
</head>
<body>

    <div class="blob-bg blob-1"></div>
    <div class="blob-bg blob-2"></div>
    <div class="blob-bg blob-3"></div>

    <nav>
        <div class="logo-container">
            <img src="images/croparm.png" alt="ARM Logo" class="logo-img" onerror="this.style.display='none'">
            <div>
                <h4 style="color:var(--orange); line-height:1; font-size:1.1rem;">ARM</h4>
                <small style="color:#888; font-weight:700; font-size:0.7rem;">Study Co.</small>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="container">
            <div class="hero-badges">
                <span class="badge-item"><i class="fas fa-eye-slash"></i> Kurangi Gadget</span>
                <span class="badge-item"><i class="fas fa-brain"></i> Melatih Motorik</span>
                <span class="badge-item"><i class="fas fa-smile"></i> Anak Happy</span>
            </div>
            
            <h1>Main Lebih Seru, <br><span>Belajar Jadi Asyik!</span></h1>
            <p>
                Koleksi worksheet tematik favorit anak. <br>
                Bantu si kecil belajar aktif tanpa harus menatap layar terus.
            </p>
            
            <button class="btn btn-primary" onclick="document.getElementById('catalog').scrollIntoView({behavior: 'smooth'})">
                <i class="fas fa-rocket"></i> Lihat Katalog
            </button>
        </div>
    </section>

    <section class="container" id="catalog">
        <div class="catalog-header">
            <h2>Koleksi <span style="color:var(--green)">Wokrsheet</span></h2>
            
            <div class="cat-toggle">
                <button class="toggle-btn active" onclick="filterData('all', this)">Semua</button>
                <button class="toggle-btn" onclick="filterData('coloring', this)">Coloring üé®</button>
                <button class="toggle-btn" onclick="filterData('tracing', this)">Tracing ‚úèÔ∏è</button>
            </div>
        </div>

        <div class="product-grid" id="gridContainer">
            <p style="text-align:center; width:100%; grid-column:1/-1; color:#999;">Memuat produk...</p>
        </div>
    </section>

    <section class="container">
        <div class="custom-section">
            <h2 class="custom-title">‚ú® Request Tema Lain?</h2>
            <p class="custom-desc">
                Punya ide tema khusus (misal: Tayo, Spiderman) atau materi belajar spesifik? 
                Kami buatkan spesial agar si kecil makin semangat!
            </p>
            
            <div class="custom-form">
                <div>
                    <label class="form-label">Jenis Worksheet</label>
                    <select id="reqType" class="form-input" onchange="toggleCustomInput()">
                        <option value="Coloring">Coloring (Mewarnai)</option>
                        <option value="Tracing Number">Tracing Angka</option>
                        <option value="Tracing Alphabet">Tracing Huruf</option>
                        <option value="Custom">Lainnya (Isi sendiri)...</option>
                    </select>
                    <input type="text" id="reqTypeOther" class="form-input hidden-input" placeholder="Tulis jenis worksheet yang diinginkan...">
                </div>
                <div>
                    <label class="form-label">Tema / Karakter (Opsional)</label>
                    <input type="text" id="reqTheme" class="form-input" placeholder="Contoh: Pokemon, Upin Ipin...">
                </div>
                <button class="btn btn-custom" style="width:100%; justify-content:center; margin-top:10px;" onclick="sendCustomRequest()">
                    <i class="fas fa-magic"></i>&nbsp; Request via WA
                </button>
            </div>
        </div>
    </section>

    <div class="cart-float" id="floatingCart" onclick="toggleCartModal(true)">
        <i class="fas fa-shopping-bag"></i>
        <span>Keranjang</span>
        <div class="cart-badge" id="cartCount">0</div>
    </div>

    <div class="modal-wrap" id="previewModal">
        <div class="modal-box">
            <button onclick="closePreview()" style="position: absolute; top: 15px; right: 15px; font-size: 1.5rem; background:none; color: #999; z-index:10;">&times;</button>
            <div id="previewContent"></div>
        </div>
    </div>

    <div class="modal-wrap" id="cartModal">
        <div class="modal-box">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h3 style="font-size:1.4rem;">Tas Belanja üéí</h3>
                <button onclick="toggleCartModal(false)" style="font-size:1.5rem; background:none; color:#999;">&times;</button>
            </div>
            <div id="cartList" style="max-height:280px; overflow-y:auto;"></div>
            <div style="margin-top:15px; border-top:2px dashed #eee; padding-top:15px;">
                <div style="display:flex; justify-content:space-between; font-weight:800; font-size:1.1rem; margin-bottom:15px;">
                    <span>Total</span>
                    <span id="cartTotal">Rp 0</span>
                </div>
                <button class="btn btn-whatsapp" onclick="checkoutWA()">
                    <i class="fab fa-whatsapp"></i>&nbsp; Lanjut ke WhatsApp
                </button>
            </div>
        </div>
    </div>

    <script>
        // CONFIG
        const NO_WA = "62812345678"; // GANTI NOMOR WA

        // INIT VARS
        let products = [];
        let cart = [];

        // FETCH JSON DATA
        async function loadProducts() {
            try {
                // Fetch dari products.json
                const response = await fetch('./products.json');
                if (!response.ok) throw new Error("Gagal mengambil data");
                
                products = await response.json();
                renderGrid(products);
            } catch (error) {
                console.error(error);
                document.getElementById('gridContainer').innerHTML = `
                    <p style="text-align:center; width:100%; grid-column:1/-1; color:red;">
                        Gagal memuat produk. Pastikan file 'products.json' ada.
                    </p>`;
            }
        }

        window.onload = () => { loadProducts(); };

        function renderGrid(data) {
            const container = document.getElementById('gridContainer');
            container.innerHTML = '';
            
            data.forEach(p => {
                let tagClass = 'tag-roblox';
                if(p.theme === 'frozen') tagClass = 'tag-frozen';
                if(p.theme === 'nusantara') tagClass = 'tag-nusantara';

                container.innerHTML += `
                    <div class="product-card" onclick="openPreview(${p.id})">
                        <div class="tape"></div>
                        <div class="card-image-wrapper">
                            <span class="tag-variant ${tagClass}">${p.theme.toUpperCase()}</span>
                            <img src="${p.img}" alt="${p.name}">
                        </div>
                        <div class="card-content">
                            <span class="card-cat">${p.category}</span>
                            <h3 class="card-title">${p.name}</h3>
                            <div class="card-action">
                                <span class="price">Rp ${p.price.toLocaleString('id-ID')}</span>
                                <button class="btn-add-mini" onclick="event.stopPropagation(); addToCart(${p.id})">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>`;
            });
        }

        function filterData(cat, btn) {
            document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            if(cat === 'all') renderGrid(products);
            else renderGrid(products.filter(p => p.category === cat));
        }

        // --- PREVIEW LOGIC ---
        function openPreview(id) {
            const p = products.find(i => i.id === id);
            const modal = document.getElementById('previewModal');
            const content = document.getElementById('previewContent');

            let tagColor = '#E74C3C';
            if(p.theme === 'frozen') tagColor = '#3498DB';
            if(p.theme === 'nusantara') tagColor = '#F1C40F';

            content.innerHTML = `
                <img src="${p.img}" class="preview-img">
                <div class="preview-details">
                    <span class="preview-tag" style="background:${tagColor}">${p.theme.toUpperCase()}</span>
                    <h3>${p.name}</h3>
                    <h2 style="color:var(--orange); margin-bottom:15px;">Rp ${p.price.toLocaleString('id-ID')}</h2>
                    <p class="preview-desc">${p.desc}</p>
                    <button class="btn btn-primary" style="width:100%; justify-content:center;" onclick="addToCart(${p.id}); closePreview()">
                        <i class="fas fa-cart-plus"></i>&nbsp; Tambah ke Keranjang
                    </button>
                </div>
            `;
            modal.classList.add('show');
        }

        function closePreview() {
            document.getElementById('previewModal').classList.remove('show');
        }

        // --- CART LOGIC ---
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const exist = cart.find(c => c.id === id);
            if(exist) exist.qty++; else cart.push({...product, qty: 1});
            updateCartUI();
            
            const floatBtn = document.getElementById('floatingCart');
            floatBtn.style.transform = "scale(1.2)";
            setTimeout(() => floatBtn.style.transform = "scale(1)", 200);
        }

        function updateCartUI() {
            const qty = cart.reduce((a,b) => a+b.qty, 0);
            document.getElementById('cartCount').innerText = qty;
            if(qty > 0) document.getElementById('floatingCart').classList.add('visible');
        }

        function toggleCartModal(show) {
            const m = document.getElementById('cartModal');
            if(show) {
                m.classList.add('show');
                renderCartList();
            } else {
                m.classList.remove('show');
            }
        }

        function renderCartList() {
            const list = document.getElementById('cartList');
            const totalEl = document.getElementById('cartTotal');
            if(cart.length === 0) {
                list.innerHTML = "<p style='text-align:center;color:#999;margin-top:20px'>Keranjang kosong.</p>";
                totalEl.innerText = "Rp 0";
                return;
            }
            let html = ''; let total = 0;
            cart.forEach(item => {
                total += item.price * item.qty;
                html += `
                <div style="display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed #eee">
                    <div>
                        <div style="font-weight:bold;font-size:0.95rem">${item.name}</div>
                        <small style="color:#888">${item.qty} x Rp ${item.price.toLocaleString('id-ID')}</small>
                    </div>
                    <button onclick="removeItem(${item.id})" style="color:#ff6b6b;background:none"><i class="fas fa-trash"></i></button>
                </div>`;
            });
            list.innerHTML = html;
            totalEl.innerText = "Rp " + total.toLocaleString('id-ID');
        }

        function removeItem(id) {
            cart = cart.filter(c => c.id !== id);
            updateCartUI(); renderCartList();
            if(cart.length === 0) document.getElementById('floatingCart').classList.remove('visible');
        }

        // --- CHECKOUT & REQUEST ---
        function checkoutWA() {
            if(cart.length === 0) return;
            
            let msg = "Halo Kak Admin ARM! üëã%0A%0ASaya mau pesan worksheet pintar ini buat si kecil belajar di rumah:%0A";
            let total = 0;
            
            cart.forEach((item, i) => {
                total += item.price * item.qty;
                msg += `${i+1}. ${item.name} (${item.qty}x) - Rp ${(item.price * item.qty).toLocaleString('id-ID')}%0A`;
            });
            
            msg += `%0A*Total Order: Rp ${total.toLocaleString('id-ID')}*%0A`;
            msg += `%0AMohon info rekeningnya ya Kak. Mau amankan paket hemat ini biar si kecil makin pintar! Terima kasih üòä`;
            
            window.open(`https://wa.me/${NO_WA}?text=${msg}`, '_blank');
        }

        function toggleCustomInput() {
            const select = document.getElementById('reqType');
            const otherInput = document.getElementById('reqTypeOther');
            
            if (select.value === 'Custom') {
                otherInput.style.display = 'block';
                otherInput.focus();
            } else {
                otherInput.style.display = 'none';
            }
        }

        function sendCustomRequest() {
            const select = document.getElementById('reqType');
            let type = select.value;
            
            if (type === 'Custom') {
                const otherVal = document.getElementById('reqTypeOther').value;
                type = otherVal ? otherVal : "Custom Request";
            }
            
            const theme = document.getElementById('reqTheme').value || "Bebas";
            
            const msg = `Halo Kak Admin! üëã%0A%0ASaya lagi cari worksheet khusus tapi belum nemu di katalog. Bisa bantu buatkan?%0A%0AüìÑ Jenis: ${type}%0Aüé® Tema/Karakter: ${theme}%0A%0ABoleh info estimasi harganya Kak? Makasih ya!`;
            
            window.open(`https://wa.me/${NO_WA}?text=${msg}`, '_blank');
        }

        window.onclick = function(event) {
            if (event.target == document.getElementById('cartModal')) toggleCartModal(false);
            if (event.target == document.getElementById('previewModal')) closePreview();
        }
    </script>
</body>
</html>

